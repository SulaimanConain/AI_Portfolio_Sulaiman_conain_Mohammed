{% extends "base.html" %}

{% block title %}Portfolio - {{ data.name }}{% endblock %}

{% block extra_head %}
<style>
  /* Mario arcade-inspired, but professional dark theme */
  .mario-bg {
    background: radial-gradient(circle at 20% 20%, #1a1a2e, #0f172a 60%),
                url('https://upload.wikimedia.org/wikipedia/en/5/50/Super_Mario_Bros._logo.png'); /* decorative bg; ignored if blocked */
    background-size: cover;
    background-blend-mode: overlay;
    animation: starTwinkle 8s infinite alternate ease-in-out;
  }
  @keyframes starTwinkle { from { filter: brightness(1); } to { filter: brightness(1.1); } }
  .pixel-border { box-shadow: 0 0 0 4px #2b2b2b, 0 0 0 6px #4dabf7; border-radius: 12px; }
  .arcade-title { font-family: 'Press Start 2P', system-ui, monospace; letter-spacing: 1px; }
  .coin { width: 22px; height: 22px; background: radial-gradient(circle, #ffd43b 0%, #ffb703 60%, #b08900 100%); border-radius: 50%; box-shadow: inset 0 0 0 2px rgba(0,0,0,0.2); display: inline-block; margin-right: 8px; animation: coinSpin 1.2s linear infinite; }
  @keyframes coinSpin { 0% { transform: rotateY(0); } 50% { transform: rotateY(180deg); } 100% { transform: rotateY(360deg); } }
  .sound-slider { width: 180px; }
  .pipe-btn { background: linear-gradient(180deg, #2ecc71, #27ae60); color: #081c15; border: none; }
  .pipe-btn:hover { filter: brightness(1.1); transform: translateY(-1px); }
  .brick-card { background: linear-gradient(180deg, #2a2a2a, #1f1f1f); border: 1px solid var(--border-color); }
</style>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
<section class="py-5 mario-bg" style="border-bottom: 1px solid var(--border-color);">
  <div class="container">
    <div class="d-flex flex-wrap align-items-center justify-content-between mb-4">
      <div class="d-flex align-items-center gap-3">
        <span class="coin" aria-hidden="true"></span>
        <div>
          <h1 class="h3 text-primary mb-1 arcade-title">{{ data.name }}</h1>
          <p class="mb-0 text-secondary">{{ data.title }}</p>
        </div>
      </div>
      <div class="d-flex align-items-center gap-3">
        <!-- Sound volume slider -->
        <div class="d-flex align-items-center gap-2">
          <i class="fas fa-volume-down text-secondary"></i>
          <input id="volumeControl" type="range" min="0" max="1" step="0.01" value="0.4" class="form-range sound-slider">
          <i class="fas fa-volume-up text-secondary"></i>
        </div>
        <a class="btn pipe-btn" href="{{ url_for('public_chat') }}"><i class="fas fa-gamepad me-2"></i>Public Chat</a>
        {% if session.logged_in %}
          <a class="btn btn-outline-warning" href="{{ url_for('chat') }}"><i class="fas fa-user-shield me-2"></i>Admin Chat</a>
          <a class="btn btn-outline-primary" href="{{ url_for('admin_upload') }}"><i class="fas fa-upload me-2"></i>Upload</a>
        {% else %}
          <a class="btn btn-outline-warning" href="{{ url_for('login') }}"><i class="fas fa-user-shield me-2"></i>Admin</a>
        {% endif %}
      </div>
    </div>

    <div class="row g-4">
      <div class="col-lg-8">
        <div class="card brick-card pixel-border p-3">
          <div class="card-body">
            <h5 class="text-primary arcade-title mb-3" style="font-size: 0.9rem;">Experience</h5>
            {% for job in data.experience %}
            <div class="mb-4">
              <div class="d-flex justify-content-between flex-wrap">
                <div class="fw-semibold">{{ job.role }} • {{ job.company }}</div>
                <small class="text-secondary">{{ job.location }} • {{ job.period }}</small>
              </div>
              <ul class="mt-2 mb-0">
                {% for item in job.highlights %}
                  <li class="text-muted">{{ item }}</li>
                {% endfor %}
              </ul>
            </div>
            {% endfor %}
          </div>
        </div>

        <div class="card brick-card pixel-border p-3 mt-4">
          <div class="card-body">
            <h5 class="text-primary arcade-title mb-3" style="font-size: 0.9rem;">Technical Summary</h5>
            <ul class="mb-0">
              {% for line in data.technical_summary %}
              <li class="text-muted">{{ line }}</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="card brick-card pixel-border p-3">
          <div class="card-body">
            <h5 class="text-primary arcade-title mb-3" style="font-size: 0.9rem;">Contact</h5>
            <div class="mb-2"><i class="fas fa-phone me-2"></i>{{ data.contact.phone }}</div>
            <div class="mb-2"><i class="fas fa-envelope me-2"></i>{{ data.contact.email }}</div>
          </div>
        </div>

        <div class="card brick-card pixel-border p-3 mt-4">
          <div class="card-body">
            <h5 class="text-primary arcade-title mb-3" style="font-size: 0.9rem;">Education</h5>
            <ul class="mb-0">
              {% for edu in data.education %}
                <li class="text-muted"><strong>{{ edu.degree }}</strong><br><small>{{ edu.school }} • {{ edu.period }}</small></li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <div class="card brick-card pixel-border p-3 mt-4">
          <div class="card-body">
            <h5 class="text-primary arcade-title mb-3" style="font-size: 0.9rem;">Skills</h5>
            <div class="d-flex flex-wrap gap-2">
              {% for skill in data.skills %}
                <span class="badge bg-primary-subtle border text-light">{{ skill }}</span>
              {% endfor %}
            </div>
          </div>
        </div>

        <div class="card brick-card pixel-border p-3 mt-4">
          <div class="card-body">
            <h5 class="text-primary arcade-title mb-3" style="font-size: 0.9rem;">Achievements</h5>
            <ul class="mb-0">
              {% for a in data.achievements %}
              <li class="text-muted">{{ a }}</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Audio elements -->
  <audio id="sfx-coin" preload="auto">
    <source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" type="audio/ogg">
  </audio>
  <audio id="sfx-jump" preload="auto">
    <source src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" type="audio/ogg">
  </audio>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
  (function(){
    const coin = document.getElementById('sfx-coin');
    const jump = document.getElementById('sfx-jump');
    const volume = document.getElementById('volumeControl');
    const setVol = (v)=>{ if(coin) coin.volume=v; if(jump) jump.volume=v; };
    if(volume){ setVol(volume.value); volume.addEventListener('input', e=> setVol(e.target.value)); }
    // subtle sfx on hover and click
    document.querySelectorAll('.pipe-btn, .btn-outline-warning, .btn-outline-primary').forEach(btn=>{
      btn.addEventListener('mouseenter', ()=>{ if(coin){ coin.currentTime=0; coin.play().catch(()=>{}); }});
      btn.addEventListener('click', ()=>{ if(jump){ jump.currentTime=0; jump.play().catch(()=>{}); }});
    });
  })();
</script>
{% endblock %}


